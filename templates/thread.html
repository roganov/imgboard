{% extends '_base.html' %}

{% block title %}Thread: {{ thread.title }}{% endblock %}
{% block content %}
<div class="thread">
    <a href="{{ thread.get_absolute_url }}"><h4><b>{{ thread.title }}</b> -- by {% firstof thread.name 'Anonymous' %} -- {{ thread.created_at }}</h4></a>

    <p>
        {% if thread.image and thread.thumbnail %}<a href="{{ thread.image.url }}"><img src="{{ thread.thumbnail.url }}"></a>{% endif %}
        {{ thread.body | safe }}
    </p>
    {% for post in posts %}
        <br>
        {% include '_post.html' %}
    {% endfor %}

    <div class="clearfix"></div>
    <br>
    <form class="form" method="POST" enctype="multipart/form-data"> {% csrf_token %}
        <div class="row">
            <div class="form-group col-xs-12">
                <label for="inputTitle" class="col-xs-1 control-label">Title</label>

                <div class="col-xs-5">
                    <input name="title" type="text" class="form-control" id="inputTitle" placeholder="Title"/>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-xs-12">
                <label class="col-xs-1 control-label" for="inputName">Name</label>

                <div class="col-xs-2">
                    <input name="name" id="inputName" type="text" class="form-control" placeholder="Name"/>
                </div>
                <label class="col-xs-1 control-label" for="inputName">Email</label>

                <div class="col-xs-2">
                    <input name="email" id="inputName" type="text" class="form-control" placeholder="Email"/>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-xs-12">
                <label for="exampleInputFile" class="col-xs-1 control-label">File</label>
                <div class="col-xs-6">
                    <input name="image" type="file" id="exampleInputFile">
                    <p class="help-block">Image or GIF allowed.</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group {% if form.raw_body.errors %}has-error{% endif %} required col-xs-12">
                <label for="inputBody" class="col-xs-1 control-label">Body</label>
                <div class="col-xs-6">
                    <textarea name="raw_body" class="form-control" rows="3"></textarea>
                    {% if form.raw_body.errors %}
                    <p class="help-block">{{ form.raw_body.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-default">Post</button>
            </div>
        </div>

    </form>
</div>
{% endblock %}
